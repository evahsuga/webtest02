<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ–ãƒ­ã‚°ä½œæˆæ”¯æ´ã‚¢ãƒ—ãƒª</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Hiragino Sans', 'Yu Gothic UI', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: white;
            padding: 20px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            font-size: 2.5rem;
            font-weight: 300;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .card {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .card h2 {
            color: #34495e;
            margin-bottom: 20px;
            font-size: 1.5rem;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #555;
        }

        input, textarea, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #3498db;
        }

        textarea {
            resize: vertical;
            min-height: 120px;
        }

        button {
            background: #3498db;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }

        button:hover {
            background: #2980b9;
        }

        button:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
        }

        .outline-section {
            margin-top: 20px;
        }

        .outline-item {
            background: #f8f9fa;
            border-left: 4px solid #3498db;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 0 5px 5px 0;
        }

        .outline-item h3 {
            color: #2c3e50;
            margin-bottom: 8px;
        }

        .outline-item p {
            color: #7f8c8d;
            font-size: 14px;
        }

        .editor {
            grid-column: 1 / -1;
        }

        .editor textarea {
            min-height: 400px;
            font-family: 'Courier New', monospace;
        }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>ãƒ–ãƒ­ã‚°ä½œæˆæ”¯æ´ã‚¢ãƒ—ãƒª</h1>
        </div>
    </header>

    <div class="container">
        <div class="main-content">
            <!-- è©±é¡Œãƒ’ã‚¢ãƒªãƒ³ã‚° -->
            <div class="card" id="topicCard">
                <h2>ğŸ“ è©±é¡Œã‚’ãŠèã‹ã›ãã ã•ã„</h2>
                <div class="form-group">
                    <label for="topic">æ›¸ããŸã„è©±é¡Œãƒ»ãƒ†ãƒ¼ãƒ</label>
                    <input type="text" id="topic" placeholder="ä¾‹ï¼šãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°å­¦ç¿’ã«ã¤ã„ã¦">
                </div>
                <div class="form-group">
                    <label for="target">æƒ³å®šèª­è€…</label>
                    <select id="target">
                        <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                        <option value="beginner">åˆå¿ƒè€…</option>
                        <option value="intermediate">ä¸­ç´šè€…</option>
                        <option value="advanced">ä¸Šç´šè€…</option>
                        <option value="general">ä¸€èˆ¬ã®æ–¹</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="purpose">è¨˜äº‹ã®ç›®çš„</label>
                    <textarea id="purpose" placeholder="ã“ã®è¨˜äº‹ã§èª­è€…ã«ä½•ã‚’ä¼ãˆãŸã„ã‹ã€ã©ã‚“ãªä¾¡å€¤ã‚’æä¾›ã—ãŸã„ã‹ã‚’æ•™ãˆã¦ãã ã•ã„"></textarea>
                </div>
                <div class="form-group">
                    <label for="experience">é–¢é€£ã™ã‚‹çµŒé¨“ãƒ»çŸ¥è­˜</label>
                    <textarea id="experience" placeholder="ã“ã®è©±é¡Œã«é–¢ã™ã‚‹ã‚ãªãŸã®çµŒé¨“ã‚„å°‚é–€çŸ¥è­˜ãŒã‚ã‚Œã°æ•™ãˆã¦ãã ã•ã„"></textarea>
                </div>
                <button onclick="generateOutline()">æ§‹æˆã‚’ææ¡ˆã—ã¦ã‚‚ã‚‰ã†</button>
            </div>

            <!-- æ§‹æˆææ¡ˆ -->
            <div class="card" id="outlineCard">
                <h2>ğŸ“‹ è¨˜äº‹æ§‹æˆæ¡ˆ</h2>
                <div id="outlineContent">
                    <p style="color: #7f8c8d; text-align: center; padding: 40px 0;">
                        å·¦å´ã®ãƒ•ã‚©ãƒ¼ãƒ ã«å…¥åŠ›ã—ã¦ã€Œæ§‹æˆã‚’ææ¡ˆã—ã¦ã‚‚ã‚‰ã†ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„
                    </p>
                </div>
                <button onclick="startWriting()" id="startWritingBtn" class="hidden">ã“ã®æ§‹æˆã§è¨˜äº‹ã‚’æ›¸ã</button>
            </div>
        </div>

        <!-- è¨˜äº‹ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ -->
        <div class="card editor hidden" id="editorCard">
            <h2>âœï¸ è¨˜äº‹ã‚’æ›¸ã</h2>
            <div class="form-group">
                <label for="title">è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«</label>
                <input type="text" id="title" placeholder="è¨˜äº‹ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚’å…¥åŠ›">
            </div>
            <div class="form-group">
                <label for="content">è¨˜äº‹å†…å®¹ï¼ˆMarkdownå½¢å¼ï¼‰</label>
                <textarea id="content" placeholder="ã“ã“ã«è¨˜äº‹ã‚’æ›¸ã„ã¦ãã ã•ã„ã€‚Markdownè¨˜æ³•ãŒä½¿ãˆã¾ã™ã€‚"></textarea>
            </div>
            <div style="display: flex; gap: 10px;">
                <button onclick="saveArticle()">è¨˜äº‹ã‚’ä¿å­˜</button>
                <button onclick="previewArticle()">ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</button>
                <button onclick="loadSavedArticles()">ä¿å­˜æ¸ˆã¿è¨˜äº‹</button>
            </div>
        </div>
    </div>

    <script>
        // ãƒ–ãƒ­ã‚°æ§‹æˆææ¡ˆæ©Ÿèƒ½
        function generateOutline() {
            const topic = document.getElementById('topic').value;
            const target = document.getElementById('target').value;
            const purpose = document.getElementById('purpose').value;
            const experience = document.getElementById('experience').value;

            if (!topic || !target || !purpose) {
                alert('å¿…é ˆé …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }

            // ã‚·ãƒ³ãƒ—ãƒ«ãªæ§‹æˆç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯
            const outline = generateBlogOutline(topic, target, purpose, experience);
            displayOutline(outline);
        }

        function generateBlogOutline(topic, target, purpose, experience) {
            const targetMap = {
                'beginner': 'åˆå¿ƒè€…',
                'intermediate': 'ä¸­ç´šè€…',
                'advanced': 'ä¸Šç´šè€…',
                'general': 'ä¸€èˆ¬ã®æ–¹'
            };

            return {
                title: `${targetMap[target]}å‘ã‘ï¼š${topic}ã«ã¤ã„ã¦`,
                sections: [
                    {
                        title: 'ã¯ã˜ã‚ã«',
                        content: `${topic}ã«ã¤ã„ã¦ã€${targetMap[target]}ã®æ–¹ã«ã‚‚åˆ†ã‹ã‚Šã‚„ã™ãè§£èª¬ã—ã¾ã™ã€‚${purpose}`
                    },
                    {
                        title: `${topic}ã¨ã¯ï¼Ÿ`,
                        content: 'åŸºæœ¬çš„ãªæ¦‚å¿µã‚„å®šç¾©ã‚’èª¬æ˜'
                    },
                    {
                        title: experience ? 'ç§ã®çµŒé¨“ã‹ã‚‰' : 'å…·ä½“ä¾‹ãƒ»äº‹ä¾‹',
                        content: experience || 'å®Ÿéš›ã®ä¾‹ã‚„äº‹ä¾‹ã‚’ç´¹ä»‹'
                    },
                    {
                        title: target === 'beginner' ? 'å§‹ã‚æ–¹ãƒ»æ³¨æ„ç‚¹' : 'ãƒã‚¤ãƒ³ãƒˆãƒ»ã‚³ãƒ„',
                        content: target === 'beginner' ? 'åˆå¿ƒè€…ãŒå§‹ã‚ã‚‹éš›ã®æ‰‹é †ã¨æ³¨æ„ç‚¹' : 'åŠ¹æœçš„ã«é€²ã‚ã‚‹ãŸã‚ã®ãƒã‚¤ãƒ³ãƒˆ'
                    },
                    {
                        title: 'ã¾ã¨ã‚',
                        content: 'è¨˜äº‹ã®è¦ç‚¹ã‚’ã¾ã¨ã‚ã€èª­è€…ã¸ã®æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’ææ¡ˆ'
                    }
                ]
            };
        }

        function displayOutline(outline) {
            const outlineContent = document.getElementById('outlineContent');
            const html = `
                <div class="outline-item">
                    <h3>ğŸ“° ææ¡ˆã‚¿ã‚¤ãƒˆãƒ«</h3>
                    <p>${outline.title}</p>
                </div>
                ${outline.sections.map((section, index) => `
                    <div class="outline-item">
                        <h3>${index + 1}. ${section.title}</h3>
                        <p>${section.content}</p>
                    </div>
                `).join('')}
            `;
            outlineContent.innerHTML = html;
            document.getElementById('startWritingBtn').classList.remove('hidden');
        }

        function startWriting() {
            document.getElementById('editorCard').classList.remove('hidden');
            const title = document.querySelector('.outline-item p').textContent;
            document.getElementById('title').value = title;
            
            // æ§‹æˆã‚’åŸºã«ã—ãŸè¨˜äº‹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ç”Ÿæˆ
            const sections = document.querySelectorAll('.outline-item');
            let template = '';
            for (let i = 1; i < sections.length; i++) {
                const sectionTitle = sections[i].querySelector('h3').textContent;
                template += `\n## ${sectionTitle}\n\nï¼ˆã“ã“ã«å†…å®¹ã‚’æ›¸ã„ã¦ãã ã•ã„ï¼‰\n\n`;
            }
            document.getElementById('content').value = template;
            
            // ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã¾ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
            document.getElementById('editorCard').scrollIntoView({ behavior: 'smooth' });
        }

        // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸æ©Ÿèƒ½
        function saveArticle() {
            const title = document.getElementById('title').value;
            const content = document.getElementById('content').value;
            
            if (!title || !content) {
                alert('ã‚¿ã‚¤ãƒˆãƒ«ã¨å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }

            const article = {
                id: Date.now(),
                title: title,
                content: content,
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString()
            };

            const savedArticles = JSON.parse(localStorage.getItem('blogArticles') || '[]');
            savedArticles.push(article);
            localStorage.setItem('blogArticles', JSON.stringify(savedArticles));
            
            alert('è¨˜äº‹ãŒä¿å­˜ã•ã‚Œã¾ã—ãŸï¼');
        }

        function loadSavedArticles() {
            const savedArticles = JSON.parse(localStorage.getItem('blogArticles') || '[]');
            if (savedArticles.length === 0) {
                alert('ä¿å­˜ã•ã‚ŒãŸè¨˜äº‹ãŒã‚ã‚Šã¾ã›ã‚“');
                return;
            }

            const articleList = savedArticles.map(article => 
                `${article.title} (${new Date(article.createdAt).toLocaleDateString()})`
            ).join('\n');
            
            const selection = prompt(`ä¿å­˜æ¸ˆã¿è¨˜äº‹:\n${articleList}\n\nèª­ã¿è¾¼ã¿ãŸã„è¨˜äº‹ã®ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ (1-${savedArticles.length})`);
            
            if (selection && !isNaN(selection) && selection >= 1 && selection <= savedArticles.length) {
                const selectedArticle = savedArticles[selection - 1];
                document.getElementById('title').value = selectedArticle.title;
                document.getElementById('content').value = selectedArticle.content;
            }
        }

        function previewArticle() {
            const title = document.getElementById('title').value;
            const content = document.getElementById('content').value;
            
            if (!title || !content) {
                alert('ã‚¿ã‚¤ãƒˆãƒ«ã¨å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }

            const previewWindow = window.open('', '_blank');
            previewWindow.document.write(`
                <!DOCTYPE html>
                <html>
                <head>
                    <title>${title}</title>
                    <style>
                        body { font-family: 'Hiragino Sans', sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
                        h1, h2, h3 { color: #2c3e50; }
                        pre { background: #f4f4f4; padding: 15px; border-radius: 5px; }
                        code { background: #f4f4f4; padding: 2px 4px; border-radius: 3px; }
                    </style>
                </head>
                <body>
                    <h1>${title}</h1>
                    <div>${content.replace(/\n/g, '<br>')}</div>
                </body>
                </html>
            `);
        }
    </script>
</body>
</html>